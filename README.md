# Heuristic Optimizer
Please refer to Sections 2.5 in the paper Obstacles in Abstracting and Learning Tetris

## Getting Started
```
python heuristic_optimizer.py
```
By default, running this will initialize the gene pool with completely random genes. Then, it'll evaluate the genes by running them through the Heuristic agent and will calculate their fitness in order to breed with other genes. 

More specifically, the entire gene pool is of size NUM_GENES and to for each gene, the fitness is evaluated. The fitness function runs the game using the gene a total of NUM_PLAYS number of times and sums the total score over all the games. This score is the gene's fitness number. Then, a random SELECTION_POOL of genes are picked out of the entire genepool, and the two fittest genes within the SELECTION_POOL of genes get to mate to produce a new gene, which may also be slightly mutated. In each round of evolution, a total of NUM_REPLACE new genes are created, which replace the NUM_REPLACE least fittest genes in the genepool.

heuristic_optimizer.py prints out the 3 best genes in the gene pool in every round, along with its fitness score. It's very possible that it may get stuck at a gene for a while. 

The following shows the output format: 

```
([GENE], fitness)
```

## Try This

Tired of starting with a random gene pool? Then try starting off with the handcrafted gene! Comment out line 56 in heuristic_optimizer.py and comment in line 59.

Rerun 
```
python heuristic_optimizer.py
```
You will see that the starting fitness of the genes will be much better than with a wild population!

## Putting heuristics to the test
Run the following to put the gene to the test:
```
python test.py
```

Inside the file, there are example genes. Simply pass the gene to the function test_heuristic and it will run the agent using solely the heuristic Q-values and without any kind of learning. The plot is simply the scores over the trials and should remain fairly constant, since each run uses the same policy as the last. It then dumps the heuristic Q-value table generated by the heuristic. 

Feel free to copy the genes that heuristic_optimizer.py outputs into test.py to see if those genes do better than the example genes!